

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>GPIO &mdash; Gizmo 0.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Gizmo 0.1 documentation" href="../index.html"/>
        <link rel="up" title="Raspberry Pi" href="index.html"/>
        <link rel="next" title="Using peripherals for extended functionality" href="peripherals.html"/>
        <link rel="prev" title="Backing up your Raspberry Pi SD image" href="backing-up.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Gizmo
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Raspberry Pi</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="setup.html">Setting up your Raspberry Pi</a></li>
<li class="toctree-l2"><a class="reference internal" href="networks.html">Accessing Networks</a></li>
<li class="toctree-l2"><a class="reference internal" href="remote-connection.html">Connecting Remotely</a></li>
<li class="toctree-l2"><a class="reference internal" href="backing-up.html">Backing up your Raspberry Pi SD image</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">GPIO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#materials-needed">Materials needed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gpio-pinout">GPIO Pinout</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#analog-vs-digital">Analog vs. Digital</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#blink">Blink</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#hardware-setup">Hardware Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#the-code">The Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#understanding-the-blink-example">Understanding the “Blink” example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#led-pwm">LED PWM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-is-pwm">What is PWM?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">The Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#understanding-led-pwm-code">Understanding “LED PWM” code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#button">Button</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Hardware Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">The Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#understanding-button-code">Understanding “Button” code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#combining-everything">Combining Everything</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">Hardware Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#code-tips">Code Tips</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="peripherals.html">Using peripherals for extended functionality</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../arduino/index.html">Arduino</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Gizmo</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Raspberry Pi</a> &raquo;</li>
        
      <li>GPIO</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/raspberrypi/gpio.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="gpio">
<h1>GPIO<a class="headerlink" href="#gpio" title="Permalink to this headline">¶</a></h1>
<p>The Raspberry Pi has General Purpose Input Output pins. This guide will give an short insight into controlling the GPIO pins on the Raspberry Pi using a Python library called <strong>GPIOzero</strong>.</p>
<ol class="arabic simple">
<li><a class="reference internal" href="#materials-needed">Materials needed</a></li>
<li><a class="reference internal" href="#gpio-pinout">GPIO pinout</a></li>
<li><a class="reference internal" href="#analog-vs-digital">Analog vs. Digital</a></li>
<li><a class="reference internal" href="#blink">Blink</a></li>
<li><a class="reference internal" href="#led-pwm">LED PWM</a></li>
<li><a class="reference internal" href="#button">Button</a></li>
<li><a class="reference internal" href="#combining-everything">Combining everything</a></li>
</ol>
<p>Your Raspberry Pi is more than just a small computer, it is a hardware prototyping tool! The RPi has <strong>bi-directional I/O pins</strong>, which you can use to drive LEDs, spin motors, or read button presses. To drive the RPi’s I/O lines requires a bit or programming. You can use a <a class="reference external" href="http://elinux.org/RPi_GPIO_Code_Samples">variety of programing languages</a>, but we decided to use a really solid, easy language for driving I/O: <strong>Python</strong>.</p>
<div class="section" id="materials-needed">
<h2>Materials needed<a class="headerlink" href="#materials-needed" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Raspberry Pi 3 B</li>
<li>[Breadboard](<a class="reference external" href="https://www.sparkfun.com/products/12002?_ga=1.251311686.1915117394.1476705504">https://www.sparkfun.com/products/12002?_ga=1.251311686.1915117394.1476705504</a>)</li>
<li>[Jumper Wires(M/F)](<a class="reference external" href="https://www.sparkfun.com/products/12794">https://www.sparkfun.com/products/12794</a>)</li>
<li>[Momentary Pushbutton Switch](<a class="reference external" href="https://www.sparkfun.com/products/9190?_ga=1.213562324.1915117394.1476705504">https://www.sparkfun.com/products/9190?_ga=1.213562324.1915117394.1476705504</a>)</li>
<li>[Resistors](<a class="reference external" href="https://www.sparkfun.com/products/11507?_ga=1.213562324.1915117394.1476705504">https://www.sparkfun.com/products/11507?_ga=1.213562324.1915117394.1476705504</a>)</li>
<li>[2 LEDs](<a class="reference external" href="https://www.sparkfun.com/products/9590?_ga=1.213548756.1915117394.1476705504">https://www.sparkfun.com/products/9590?_ga=1.213548756.1915117394.1476705504</a>)</li>
</ul>
</div>
<div class="section" id="gpio-pinout">
<h2>GPIO Pinout<a class="headerlink" href="#gpio-pinout" title="Permalink to this headline">¶</a></h2>
<p>Raspberry has its GPIO over a standard male header on the board. From the first models to the latest, the header has expanded from 26 pins to 40 pins while maintaining the original pinout.</p>
<a class="reference internal image-reference" href="../_images/rpi_old_new_pin.jpg"><img alt="../_images/rpi_old_new_pin.jpg" class="align-center" src="../_images/rpi_old_new_pin.jpg" style="width: 500px;" /></a>
<p>There are (at least) two, different numbering schemes you may encounter when referencing <strong>Pi pin numbers</strong>:</p>
<ol class="arabic simple">
<li><strong>Broadcom (SoC) chip-specific</strong> pin numbers.</li>
<li><strong>P1 physical</strong> pin numbers.</li>
</ol>
<p>You can use either number-system, but when you are programming how to use the pins, it requires that you declare which scheme you are using at the very beginning of your program. We will see this later.</p>
<p>The next table shows all 40 pins on the P1 header, including any particular function they may have, and their dual numbers:</p>
<a class="reference internal image-reference" href="../_images/header_pinout.jpg"><img alt="../_images/header_pinout.jpg" class="align-center" src="../_images/header_pinout.jpg" style="width: 500px;" /></a>
<p>In the next table, we show another numbering system along with the ones we showed above: <strong>Pi pin header numbers and element14 given names, wiringPi numbers, Python numbers, and related silkscreen on the wedge</strong>. The Broadcom pin numbers in the table are related to RPi Model 2 and later only.</p>
<a class="reference internal image-reference" href="../_images/pi_pin_header_numbers.png"><img alt="../_images/pi_pin_header_numbers.png" class="align-center" src="../_images/pi_pin_header_numbers.png" style="width: 500px;" /></a>
<p>This table shows that the RPi not only gives you access to the bi-directional I/O pins, but also</p>
<ul class="simple">
<li><a class="reference external" href="https://learn.sparkfun.com/tutorials/serial-communication">Serial (UART)</a>,</li>
<li><a class="reference external" href="https://learn.sparkfun.com/tutorials/i2c">I2C</a>,</li>
<li><a class="reference external" href="https://learn.sparkfun.com/tutorials/serial-peripheral-interface-spi">SPI</a>,</li>
<li>and even some Pulse width modulation (<a class="reference external" href="https://learn.sparkfun.com/tutorials/pulse-width-modulation">PWM</a> — a.k.a. “analog output”).</li>
</ul>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">There is a useful online guide for finding the assignment and numbering of each pin, along with other guides, that you may find useful at: <a class="reference external" href="pinout.xyz">pinout.xyz</a></p>
</div>
<div class="section" id="analog-vs-digital">
<h3>Analog vs. Digital<a class="headerlink" href="#analog-vs-digital" title="Permalink to this headline">¶</a></h3>
<p>Before starting with our practise, we will revise the difference between <strong>analog</strong> and <strong>digital</strong> signals. Both are used to transmit information, usually through <strong>electric signals</strong>. In both these technologies, the information, such as any audio or video, is transformed into electric signals. The <strong>difference between analog and digital</strong>:</p>
<ul class="simple">
<li>In <strong>analog technology</strong>, information is translated into electric pulses of varying amplitude.</li>
<li>In <strong>digital technology</strong>, translation of information is into binary format (zero or one) where each bit is representative of two distinct amplitudes.</li>
</ul>
<a class="reference internal image-reference" href="../_images/analog_digital.png"><img alt="../_images/analog_digital.png" class="align-center" src="../_images/analog_digital.png" style="width: 500px;" /></a>
<div class="section" id="comparison-chart">
<h4>Comparison chart<a class="headerlink" href="#comparison-chart" title="Permalink to this headline">¶</a></h4>
 <div style="overflow-x:auto;font-size:.8em">
   <table border="1" cellpadding="5" style="width:100%;min-width:600px">
     <colgroup>
       <col span="1" style="width: 10%;">
       <col span="1" style="width: 20%;">
       <col span="1" style="width: 60%;">
     </colgroup>
     <tr bgcolor="#B0B1AF">
       <th></th>
       <th>Analogue</th>
       <th>Digital</th>
     </tr>
     <tr>
       <td >Signal</td>
       <td >Analog signal is a continuous signal which represents physical measurements.</td>
       <td >Digital signals are discrete time signals generated by digital modulation.</td>
     </tr>
     <tr>
       <td >Waves</td>
       <td >Denoted by sine waves.</td>
       <td >Denoted by square waves.</td>
     </tr>
     <tr>
       <td >Representation</td>
       <td >Uses continuous range of values to represent information.</td>
       <td >Uses discrete or discontinuous values to represent information.</td>
     </tr>
     <tr>
       <td >Example</td>
       <td >Human voice in air, analog electronic devices.</td>
       <td >Computers, CDs, DVDs, and other digital electronic devices.</td>
     </tr>
     <tr>
       <td >Technology</td>
       <td >Analog technology records waveforms as they are.</td>
       <td >Samples analog waveforms into a limited set of numbers and records them.</td>
     </tr>
     <tr>
       <td >Data transmissions</td>
       <td >Subjected to deterioration by noise during transmission and write/read cycle.</td>
       <td >Can be noise-immune without deterioration during transmission and write/read cycle.</td>
     </tr>
     <tr>
       <td >Response to Noise</td>
       <td >More likely to get affected reducing accuracy.</td>
       <td >Less affected since noise response are analog in nature.</td>
     </tr>
     <tr>
       <td >Flexibility</td>
       <td >Analog hardware is not flexible.</td>
       <td >Digital hardware is flexible in implementation.</td>
     </tr>
     <tr>
       <td >Uses</td>
       <td >Can be used in analog devices only. Best suited for audio and video transmission.</td>
       <td >Best suited for Computing and digital electronics.</td>
     </tr>
     <tr>
       <td >Applications</td>
       <td >Thermometer.</td>
       <td >PCs, PDAs.</td>
     </tr>
     <tr>
       <td >Bandwidth</td>
       <td >Analog signal processing can be done in real time and consumes less bandwidth.</td>
       <td >There is no guarantee that digital signal processing can be done in real time and consumes more bandwidth to carry out the same information.</td>
     </tr>
     <tr>
       <td >Memory</td>
       <td >Stored in the form of wave signal.</td>
       <td >Stored in the form of binary bit.</td>
     </tr>
     <tr>
       <td >Power</td>
       <td >Analog instrument draws large power.</td>
       <td >Digital instrument draws negligible power.</td>
     </tr>
     <tr>
       <td >Cost</td>
       <td >Low cost and portable.</td>
       <td >Cost is high and not easily portable.</td>
     </tr>
     <tr>
       <td >Impedance</td>
       <td >Low</td>
       <td >High order of 100 megaohms</td>
     </tr>
     <tr>
       <td >Errors</td>
       <td >Analog instruments usually have a scale which is cramped at lower end and give considerable observational errors.</td>
       <td >Digital instruments are free from observational errors like parallax and approximation errors.</td>
     </tr>
   </table>
 </div>
<br></div>
</div>
</div>
<div class="section" id="blink">
<h2>Blink<a class="headerlink" href="#blink" title="Permalink to this headline">¶</a></h2>
<p>We will start with a very easy example, the classic “Blink” example, later we will do the same with our Arduino and see the differences.</p>
<div class="section" id="hardware-setup">
<h3>Hardware Setup<a class="headerlink" href="#hardware-setup" title="Permalink to this headline">¶</a></h3>
<p>We start assembling the circuit as shown in the diagram below.</p>
<a class="reference internal image-reference" href="../_images/raspi-blink-wiring.png"><img alt="../_images/raspi-blink-wiring.png" class="align-center" src="../_images/raspi-blink-wiring.png" style="width: 500px;" /></a>
</div>
<div class="section" id="the-code">
<h3>The Code<a class="headerlink" href="#the-code" title="Permalink to this headline">¶</a></h3>
<p>For the code we are going to use the <a class="reference external" href="https://gpiozero.readthedocs.io/en/stable/">GPIOzero</a> library which is based on the <a class="reference external" href="https://sourceforge.net/p/raspberry-gpio-python/wiki/Home/">standard GPIO library</a>.</p>
<ol class="arabic simple">
<li>From your laptop’s terminal connect to the RPi</li>
<li>Create a folder called “code” and inside it a file called “blinker.py”:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ mkdir code
$ <span class="nb">cd</span> code
$ nano blinker.py
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may not need to create a new folder every time for the script. i.e. once you have created the folder code, you can create the scripts within the folder with <code class="docutils literal notranslate"><span class="pre">nano</span> <span class="pre">&lt;script</span> <span class="pre">name&gt;</span></code>. The command <code class="docutils literal notranslate"><span class="pre">nano</span></code> in this case is to open the nano editor.</p>
</div>
<ol class="arabic simple" start="3">
<li>Copy and paste this code:</li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">gpiozero</span> <span class="kn">import</span> <span class="n">LED</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="n">led</span> <span class="o">=</span> <span class="n">LED</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">led</span><span class="o">.</span><span class="n">on</span><span class="p">()</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">led</span><span class="o">.</span><span class="n">off</span><span class="p">()</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li>Save and exit</li>
<li>Run this script with the command:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo python ./blinker.py
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>To stop the script from running press <code class="docutils literal notranslate"><span class="pre">CTRL+C</span></code></li>
<li>To make the script an executable run:</li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo chmod u+x blinker.py
</pre></div>
</div>
<p>Now you can execute it with just this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./blinker.py
</pre></div>
</div>
<ol class="arabic simple" start="8">
<li>Yay! The LED is blinking!</li>
</ol>
</div>
<div class="section" id="understanding-the-blink-example">
<h3>Understanding the “Blink” example<a class="headerlink" href="#understanding-the-blink-example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>
</pre></div>
</div>
<p>This line is used to tell which interpreter (in our case Python) to use when the file is made into an executable.</p>
<p>When we use Python to control our GPIO pins, we always need to import the corresponding Python module, which goes at the top of the script:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">gpiozero</span> <span class="kn">as</span> <span class="nn">gpio</span>
</pre></div>
</div>
<p>Here, we are giving a shorter name to the module “GPIOzero”, in order to call the module through our script. This line is fundamental for every script requiring GPIO functions. If you want to import only certain classes from “GPIOzero” you could also specify the components. As an example, let’s say if you are interested in only the LED:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gpiozero</span> <span class="kn">import</span> <span class="n">LED</span>
</pre></div>
</div>
<p>Or if want to use the Button and LED class.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">gpiozero</span> <span class="kn">import</span> <span class="n">LED</span><span class="p">,</span> <span class="n">Button</span>
</pre></div>
</div>
<p>And if we are just importing the function sleep from the <a class="reference external" href="https://www.tutorialspoint.com/python/time_sleep.htm">time library</a>, we will later use it to make the LED blink.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>
</pre></div>
</div>
<p>In the next line:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">led</span> <span class="o">=</span> <span class="n">LED</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we are creating a variable called <code class="docutils literal notranslate"><span class="pre">led</span></code> and we are initialising it with an object of the class <a class="reference external" href="https://gpiozero.readthedocs.io/en/stable/api_output.html#led">LED</a>. On object of the class LED to be initialised takes as a parameter the pin number to which the LED is connected to, in our case the pin number is 17 (BCM 17, not physical pin number 17).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">GPIOzero uses <strong>ONLY</strong> Broadcom (BCM) pin numbering, instead of physical pin numbering and it is not configurable, so when referring to pins in one of your scripts always use this numbering:</p>
</div>
<a class="reference internal image-reference" href="../_images/broadcom_pin_layout.svg"><div align="center" class="align-center"><img alt="../_images/broadcom_pin_layout.svg" src="../_images/broadcom_pin_layout.svg" width="250" /></div>
</a>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
</pre></div>
</div>
<p>Here we are are basically asking to Python to loop forever. In fact the <code class="docutils literal notranslate"><span class="pre">while</span></code> statements loops through its code until the initial condition becomes false, in our case never.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">led</span><span class="o">.</span><span class="n">on</span><span class="p">()</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">led</span><span class="o">.</span><span class="n">off</span><span class="p">()</span>
<span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we are using two methods of the class <a class="reference external" href="https://gpiozero.readthedocs.io/en/stable/api_output.html#led">LED</a> of GPIOzero. <code class="docutils literal notranslate"><span class="pre">on()</span></code> switches the device on and <code class="docutils literal notranslate"><span class="pre">off()</span></code> turns it off. We are calling the two functions with a 1 second interval, in fact the function <code class="docutils literal notranslate"><span class="pre">sleep()</span></code> suspends execution for the given number of seconds.</p>
</div>
</div>
<div class="section" id="led-pwm">
<h2>LED PWM<a class="headerlink" href="#led-pwm" title="Permalink to this headline">¶</a></h2>
<p>Use the same layout for the electronics as before.</p>
<div class="section" id="what-is-pwm">
<h3>What is PWM?<a class="headerlink" href="#what-is-pwm" title="Permalink to this headline">¶</a></h3>
<p>Pulse Width Modulation, or PWM, is a technique for getting analog results with digital means. Digital control is used to create a square wave, a signal switched between on and off. This on-off pattern can simulate voltages in between full on (3.3 Volts for RPi and 5 Volts for Arduino) and off (0 Volts) by changing the portion of the time the signal spends on versus the time that the signal spends off. The duration of “on time” is called the pulse width. To get varying analog values, you change, or modulate, that pulse width. If you repeat this on-off pattern fast enough with an LED for example, the result is as if the signal is a steady voltage between 0 and 5v controlling the brightness of the LED.</p>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">For more information check out <a class="reference external" href="https://learn.sparkfun.com/tutorials/pulse-width-modulation">this link</a>.</p>
</div>
</div>
<div class="section" id="id2">
<h3>The Code<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Repeat the same steps of “Blink” to upload the code below, this time call the file <em>led-pwm.py</em> and save it in the <code class="docutils literal notranslate"><span class="pre">code</span></code> folder that we have previously created. It’s up to you to make the code executable or not.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">gpiozero</span> <span class="kn">import</span> <span class="n">PWMLED</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="n">led</span> <span class="o">=</span> <span class="n">PWMLED</span><span class="p">(</span><span class="mi">17</span><span class="p">)</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">led</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># off</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">led</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mf">0.5</span>  <span class="c1"># half brightness</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">led</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># full brightness</span>
    <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="understanding-led-pwm-code">
<h3>Understanding “LED PWM” code<a class="headerlink" href="#understanding-led-pwm-code" title="Permalink to this headline">¶</a></h3>
<p>The main difference here is that we are using the <a class="reference external" href="https://gpiozero.readthedocs.io/en/stable/api_output.html#gpiozero.PWMLED">class PWMLED</a> instead of the class LED. The PWMLED class has an extra parameter that we can tweak which is <code class="docutils literal notranslate"><span class="pre">value</span></code>. <code class="docutils literal notranslate"><span class="pre">value</span></code> indicates the duty cycle of this PWM device. <code class="docutils literal notranslate"><span class="pre">0.0</span></code> is off, <code class="docutils literal notranslate"><span class="pre">1.0</span></code> is fully on. Values in between may be specified for varying levels of power in the device.</p>
</div>
</div>
<div class="section" id="button">
<h2>Button<a class="headerlink" href="#button" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>Hardware Setup<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>We start assembling the circuit as shown in the diagram below.</p>
<a class="reference internal image-reference" href="../_images/button-wiring.png"><img alt="../_images/button-wiring.png" class="align-center" src="../_images/button-wiring.png" style="width: 500px;" /></a>
</div>
<div class="section" id="id4">
<h3>The Code<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Repeat the same steps of “Blink” to upload the code below, this time call the file <em>button.py</em> and save it in the <code class="docutils literal notranslate"><span class="pre">code</span></code> folder that we have previously created. It’s up to you to make the code executable or not.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">from</span> <span class="nn">gpiozero</span> <span class="kn">import</span> <span class="n">Button</span>

<span class="n">button</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">buttonWasPressed</span> <span class="o">=</span> <span class="bp">False</span> <span class="c1"># 1st flag</span>
<span class="n">buttonWasReleased</span> <span class="o">=</span> <span class="bp">False</span> <span class="c1"># 2nd flag</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">button</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">:</span>
        <span class="n">buttonWasReleased</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">buttonWasPressed</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Button is pressed&quot;</span><span class="p">)</span>
            <span class="n">buttonWasPressed</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">buttonWasPressed</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">buttonWasReleased</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Button is released&quot;</span><span class="p">)</span>
            <span class="n">buttonWasReleased</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>
</div>
</div>
<div class="section" id="understanding-button-code">
<h3>Understanding “Button” code<a class="headerlink" href="#understanding-button-code" title="Permalink to this headline">¶</a></h3>
<p>Here we are using the <a class="reference external" href="https://gpiozero.readthedocs.io/en/stable/api_input.html#button">class Button</a> from <code class="docutils literal notranslate"><span class="pre">GPIOzero</span></code>. This class has many functions and parameter, so make sure you check out the reference. Here we are using the <code class="docutils literal notranslate"><span class="pre">is_pressed</span></code> property of the class. <code class="docutils literal notranslate"><span class="pre">is_pressed</span></code> returns True if the device is currently active and False otherwise.</p>
<p>In this example, we also introduce the concept of flags. Flags are a way to help us keep track of the binary state of a particular thing by storing them as boolean variables (<code class="docutils literal notranslate"><span class="pre">1</span></code>/<code class="docutils literal notranslate"><span class="pre">0</span></code> or <code class="docutils literal notranslate"><span class="pre">True</span></code>/<code class="docutils literal notranslate"><span class="pre">False</span></code>). In this case, we need to keep track of the binary state of whether the button is was pressed, and the binary state of whether the button was released.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">We need to keep track of the <em>actions</em> that occurred, not the state of the button itself as this is already monitored <code class="docutils literal notranslate"><span class="pre">is_pressed</span></code> property of the <code class="docutils literal notranslate"><span class="pre">Button()</span></code> class.</p>
</div>
<p>In the code above, we use these flags to prevent the repetition of a print statement. i.e. If we did not have them, then the <em>“Button is released”</em> statement would print repetitively until the button was pressed, and vice versa.</p>
<p>Flags allow us to ensure the print statement is only <em>printed</em> on the first iteration of the loop. Every iteration thereafter will skip the print statement. This occurs until there is a change in the <code class="docutils literal notranslate"><span class="pre">is_pressed</span></code> property, at which point the respective flag is reset to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</div>
</div>
<div class="section" id="combining-everything">
<h2>Combining Everything<a class="headerlink" href="#combining-everything" title="Permalink to this headline">¶</a></h2>
<p>Now we challenge you to combine all the previous three scripts to create one. Make the script in order that:</p>
<ul class="simple">
<li>when the button is pressed one of the two LEDs fades to 25% of its brightness and the other one blinks once</li>
<li>when the button is released the PWM LED goes back to 100% brightness.</li>
</ul>
<div class="section" id="id5">
<h3>Hardware Setup<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>We start assembling the circuit as shown in the diagram below.</p>
<a class="reference internal image-reference" href="../_images/practise_1.png"><img alt="../_images/practise_1.png" class="align-center" src="../_images/practise_1.png" style="width: 500px;" /></a>
</div>
<div class="section" id="code-tips">
<h3>Code Tips<a class="headerlink" href="#code-tips" title="Permalink to this headline">¶</a></h3>
<p>Use the <code class="docutils literal notranslate"><span class="pre">when_pressed</span></code> and <code class="docutils literal notranslate"><span class="pre">when_released</span></code> properties of the <a class="reference external" href="https://gpiozero.readthedocs.io/en/stable/api_input.html#button">Button class</a>. You can find the code to control one LED with the button, <a class="reference external" href="https://gpiozero.readthedocs.io/en/stable/recipes.html#button-controlled-led">here</a>.</p>
<div class="refbox admonition">
<p class="first admonition-title">Acknowledgements</p>
<ul class="last simple">
<li>Based on the GPIOzero library <a class="reference external" href="https://gpiozero.readthedocs.io/en/stable/index.html">notes</a>,</li>
<li><a class="reference external" href="http://www.diffen.com/difference/Analog_vs_Digital">this reference</a>,</li>
<li>and <a class="reference external" href="https://learn.sparkfun.com/tutorials/raspberry-gpio">this Sparkfun intro</a>.</li>
</ul>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="peripherals.html" class="btn btn-neutral float-right" title="Using peripherals for extended functionality" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="backing-up.html" class="btn btn-neutral" title="Backing up your Raspberry Pi SD image" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Imperial College, School of Design Engineering.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>